'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { Package, Sparkles, Settings } from 'lucide-react';
import {
  Sidebar,
  SidebarContent,
  SidebarGroup,
  SidebarGroupContent,
  SidebarHeader,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarRail,
} from '@/components/ui/sidebar';
import { useTranslations, useLocale } from 'next-intl';
import { cn } from '@/lib/utils';

export function AppSidebar() {
  const t = useTranslations('Sidebar');
  const locale = useLocale();
  const pathname = usePathname();
  const isRTL = locale === 'ar';

  const navItems = [
    {
      title: t('products'),
      href: '/dashboard/products',
      icon: Package,
    },
    {
      title: t('settings'),
      href: '/dashboard/settings',
      icon: Settings,
    },
  ];

  return (
    <Sidebar collapsible='icon' side={isRTL ? 'right' : 'left'}>
      <SidebarHeader>
        <div>
          <svg
            width='140'
            height='39'
            viewBox='0 0 258 39'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M183.796 19.6401H174.943V37.0244H178.272C180.411 37.0244 182.155 35.2754 182.155 33.1302V24.6931C182.155 22.899 182.503 20.9738 183.796 19.6401ZM190.06 11.7124C193.142 11.7124 195.631 12.6396 197.527 14.4938C199.422 16.3486 200.37 19.099 200.37 22.746V37.0244H197.041C194.902 37.0244 193.158 35.2754 193.158 33.1302V23.8588C193.158 21.8807 192.726 20.4049 191.863 19.431C191.001 18.4578 189.752 17.9712 188.119 17.9712H174.943V12.0835H181.831V15.0039C182.787 13.9536 183.974 13.1419 185.391 12.5701C186.809 11.9984 188.365 11.7124 190.06 11.7124Z'
              fill='#28A8E0'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M159.244 16.812C157.611 16.812 156.239 17.2755 155.129 18.2027C152.104 20.7313 152.125 27.4263 155.592 29.8853C156.855 30.7816 158.428 31.2297 160.308 31.2297C161.602 31.2297 162.75 31.0363 163.751 30.6502C163.934 30.5794 164.115 30.5015 164.292 30.4167C165.854 29.6679 167.647 30.0137 168.821 31.2901L170.385 32.991C168.043 35.68 164.622 37.0244 160.122 37.0244C157.318 37.0244 154.837 36.4755 152.679 35.3787C150.522 34.2815 148.858 32.7591 147.687 30.812C146.516 28.8652 145.93 26.6552 145.93 24.183C145.93 21.7414 146.508 19.5393 147.663 17.5769C148.819 15.6144 150.407 14.0845 152.425 12.987C154.444 11.8901 156.702 11.3412 159.198 11.3412C161.633 11.3412 163.836 11.867 165.809 12.9178C167.781 13.9684 169.33 15.4752 170.455 17.4376C171.58 19.4003 172.142 21.6795 172.142 24.2759C172.142 24.3682 172.096 25.0173 172.003 26.223H155.049V25.8982C155.049 23.7533 156.793 22.004 158.932 22.004H165.346C165.1 20.428 164.422 19.1681 163.312 18.2256C162.203 17.2833 160.847 16.812 159.244 16.812Z'
              fill='#28A8E0'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M120.233 16.812C120.453 16.2487 120.751 15.7155 121.125 15.2123C122.034 13.9915 123.359 13.0414 125.101 12.3617C126.842 11.6814 128.899 11.3412 131.272 11.3412C133.029 11.3412 134.778 11.5346 136.52 11.9211C138.261 12.3073 139.702 12.8405 140.842 13.5209L140.011 15.2996C139.194 17.0489 137.263 17.9261 135.412 17.3872C134.095 17.0035 132.714 16.812 131.272 16.812H120.233ZM129.932 37.0244C127.867 37.0244 125.848 36.7697 123.876 36.2596C121.903 35.7492 120.331 35.108 119.16 34.3353L119.937 32.657C120.775 30.8489 122.812 29.9708 124.696 30.6054C124.984 30.7027 125.281 30.7947 125.586 30.8817C127.158 31.3299 128.699 31.5543 130.209 31.5543C133.261 31.5543 134.786 30.7969 134.786 29.2826C134.786 28.5716 134.37 28.0619 133.538 27.7524C132.706 27.4438 131.427 27.1809 129.701 26.9644C127.667 26.6552 125.987 26.3 124.661 25.8982C123.336 25.4967 122.188 24.7857 121.217 23.7655C120.406 22.9134 119.934 21.759 119.8 20.3025C119.756 19.8178 119.902 19.3841 120.229 19.0245C120.555 18.6656 120.973 18.4809 121.458 18.4809H126.783C126.694 18.6828 126.649 18.8993 126.649 19.1297C126.649 19.9026 127.066 20.4434 127.898 20.7522C128.73 21.0614 130.055 21.355 131.874 21.6332C133.907 21.973 135.572 22.336 136.867 22.7225C138.161 23.1087 139.286 23.8118 140.241 24.832C141.197 25.8519 141.674 27.2736 141.674 29.0967C141.674 30.6423 141.212 32.0177 140.287 33.2232C139.363 34.428 138.014 35.363 136.242 36.0274C134.47 36.6921 132.366 37.0244 129.932 37.0244Z'
              fill='#28A8E0'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M245.101 16.812C243.468 16.812 242.097 17.2755 240.987 18.2027C237.961 20.7313 237.983 27.4263 241.449 29.8853C242.713 30.7816 244.285 31.2297 246.165 31.2297C247.459 31.2297 248.607 31.0363 249.609 30.6502C249.791 30.5794 249.972 30.5015 250.149 30.4167C251.712 29.6679 253.505 30.0137 254.679 31.2901L256.243 32.991C253.901 35.68 250.48 37.0244 245.98 37.0244C243.176 37.0244 240.694 36.4755 238.537 35.3787C236.379 34.2815 234.715 32.7591 233.544 30.812C232.373 28.8652 231.787 26.6552 231.787 24.183C231.787 21.7414 232.365 19.5393 233.521 17.5769C234.677 15.6144 236.264 14.0845 238.283 12.987C240.301 11.8901 242.559 11.3412 245.055 11.3412C247.49 11.3412 249.693 11.867 251.666 12.9178C253.638 13.9684 255.187 15.4752 256.312 17.4376C257.437 19.4003 258 21.6795 258 24.2759C258 24.3682 257.953 25.0173 257.861 26.223H240.906V25.8982C240.906 23.7533 242.651 22.004 244.789 22.004H251.204C250.957 20.428 250.28 19.1681 249.17 18.2256C248.061 17.2833 246.704 16.812 245.101 16.812Z'
              fill='#28A8E0'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M206.09 16.812C206.311 16.2487 206.608 15.7155 206.982 15.2123C207.892 13.9915 209.217 13.0414 210.958 12.3617C212.699 11.6814 214.757 11.3412 217.13 11.3412C218.886 11.3412 220.635 11.5346 222.377 11.9211C224.118 12.3073 225.559 12.8405 226.7 13.5209L225.868 15.2996C225.051 17.0489 223.12 17.9261 221.269 17.3872C219.952 17.0035 218.572 16.812 217.13 16.812H206.09ZM215.79 37.0244C213.724 37.0244 211.706 36.7697 209.733 36.2596C207.761 35.7492 206.189 35.108 205.018 34.3353L205.795 32.657C206.632 30.8489 208.669 29.9708 210.553 30.6054C210.841 30.7027 211.138 30.7947 211.443 30.8817C213.015 31.3299 214.556 31.5543 216.067 31.5543C219.118 31.5543 220.643 30.7969 220.643 29.2826C220.643 28.5716 220.228 28.0619 219.396 27.7524C218.563 27.4438 217.284 27.1809 215.558 26.9644C213.524 26.6552 211.844 26.3 210.519 25.8982C209.194 25.4967 208.046 24.7857 207.075 23.7655C206.264 22.9134 205.791 21.759 205.658 20.3025C205.614 19.8178 205.759 19.3841 206.086 19.0245C206.413 18.6656 206.83 18.4809 207.315 18.4809H212.64C212.551 18.6828 212.507 18.8993 212.507 19.1297C212.507 19.9026 212.923 20.4434 213.755 20.7522C214.587 21.0614 215.913 21.355 217.731 21.6332C219.765 21.973 221.429 22.336 222.724 22.7225C224.018 23.1087 225.143 23.8118 226.098 24.832C227.054 25.8519 227.532 27.2736 227.532 29.0967C227.532 30.6423 227.069 32.0177 226.145 33.2232C225.22 34.428 223.872 35.363 222.1 36.0274C220.327 36.6921 218.224 37.0244 215.79 37.0244Z'
              fill='#28A8E0'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M20.3595 10.176V33.8717C20.3595 36.3185 18.3689 38.3145 15.9289 38.3145H11.815V14.6187C11.815 12.1722 13.8047 10.176 16.2456 10.176H20.3595ZM11.815 8.27173H0V5.73317C0 3.28631 1.9906 1.29007 4.43058 1.29007H32.1738V3.82894C32.1738 6.27644 30.1839 8.27173 27.7439 8.27173H20.3595H11.815Z'
              fill='#203367'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M82.2793 20.9129V22.7117H99.745C104.568 22.7117 109.84 19.4261 113.003 15.73C113.864 14.319 114.295 12.7148 114.295 10.9167C114.295 7.95441 113.09 5.60956 110.682 3.88214C108.273 2.15441 104.819 1.29007 100.318 1.29007H82.2793V14.5659H86.3403C88.7809 14.5659 90.7709 12.5703 90.7709 10.1231V7.74318H99.2628C101.373 7.74318 102.973 8.10462 104.062 8.8272C105.152 9.5504 105.698 10.6344 105.698 12.0799C105.698 13.526 105.152 14.6188 104.062 15.3595C102.973 16.0996 101.372 16.4701 99.2628 16.4701H86.7099C84.2693 16.4701 82.2793 18.466 82.2793 20.9129ZM100.74 31.8617C102.99 31.8617 104.687 31.4915 105.829 30.7507C106.972 30.0106 107.543 28.8646 107.543 27.3128C107.543 25.5312 106.778 24.2666 105.247 23.52C106.47 23.0512 107.664 22.4513 108.798 21.7553C109.858 21.1047 111.007 20.932 112.212 21.2418C113.416 21.5516 114.34 22.2582 114.957 23.3407C115.746 24.7254 116.141 26.3499 116.141 28.2125C116.141 31.4561 114.884 33.9512 112.37 35.6964C109.855 37.4414 106.19 38.3145 101.373 38.3145H82.2793V24.6156H86.3403C88.7809 24.6156 90.7709 26.6112 90.7709 29.0584V31.8617H100.74Z'
              fill='#203367'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M54.6684 8.40937C53.2242 11.9055 52.0773 14.6728 51.0941 17.0418C50.5546 18.3411 49.5481 19.2336 48.1962 19.6126C44.6798 20.598 41.838 22.419 39.4434 24.879L50.5017 -0.000847577H58.9404L70.1113 25.0518C67.6695 22.4916 64.761 20.6015 61.1363 19.5969C59.7765 19.2201 58.7639 18.3226 58.224 17.0158C57.2699 14.7066 56.1349 11.9584 54.6684 8.40937Z'
              fill='#28A8E0'
            />
            <path
              fill-rule='evenodd'
              clip-rule='evenodd'
              d='M34.9375 37.0244H40.1658C41.7436 37.0244 43.0992 36.268 43.9307 34.923C46.2277 31.2097 50.2821 28.9325 54.7781 28.9325C59.2738 28.9325 63.3282 31.2097 65.6252 34.923C66.457 36.268 67.8123 37.0244 69.3902 37.0244H74.614C73.8373 32.2931 64.8203 20.6812 54.7781 20.6812C44.1708 20.6812 37.4914 27.6932 34.9375 37.0244Z'
              fill='#203367'
            />
          </svg>
        </div>
      </SidebarHeader>
      <SidebarContent>
        <SidebarGroup>
          <SidebarGroupContent>
            <SidebarMenu>
              {navItems.map((item) => {
                const Icon = item.icon;
                const isActive = pathname.startsWith(item.href);

                return (
                  <SidebarMenuItem key={item.href}>
                    <SidebarMenuButton
                      asChild
                      isActive={isActive}
                      tooltip={{
                        children: item.title,
                        side: isRTL ? 'left' : 'right',
                        align: 'center',
                      }}
                      className={cn(
                        isRTL ? 'flex-row' : undefined,
                      )}
                    >
                      <Link href={item.href}>
                        <Icon />
                        <span>{item.title}</span>
                      </Link>
                    </SidebarMenuButton>
                  </SidebarMenuItem>
                );
              })}
            </SidebarMenu>
          </SidebarGroupContent>
        </SidebarGroup>
      </SidebarContent>
      <SidebarRail />
    </Sidebar>
  );
}
